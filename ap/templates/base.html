<!DOCTYPE html>
<html>

<head>
	<meta http-equiv="content-type" charset="utf-8">
	<title>Analysis Platform</title>
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- https://stackoverflow.com/questions/31075893/im-getting-favicon-ico-error -->
	<link rel="icon" href="{{ url_for('static', filename = 'common/icons/favicon.ico') }}" type="image/x-icon"/>
    <link rel="shortcut icon" href="{{ url_for('static', filename = 'common/icons/favicon.ico') }}"
          type="image/x-icon"/>

    <!-- JQuery CSS -->
    <link href="{{ url_for('static', filename = 'common/custom-jquery/jquery-ui.css') }}" rel="stylesheet"/>

    <!-- Select 2 -->
    <link href="{{ url_for('static', filename = 'common/css/select2.min.css') }}" rel="stylesheet"/>

    <!-- https://qiita.com/tonkotsuboy_com/items/15a914f073c8f9bb1344 -->
    <!--Bootstrap４に必要なCSSとJavaScriptを読み込み-->
    <link rel="stylesheet" href="{{ url_for('static', filename = 'common/css/bootstrap.min.css') }}">
    <!-- Fontawesome CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename = 'common/css/all.min.css') }}">
    <!-- Custom Common CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename = 'common/css/main.css') }}">
    <!-- Components CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename = 'common/css/components.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename = 'common/css/dragndrop.css') }}">


    <!-- JQuery -->
    <script src="{{ url_for('static', filename = 'common/js/libs/jquery.js') }}"></script>
    <!-- https://stackoverflow.com/questions/45356723/jquery-ui-cannot-read-property-step-of-undefined -->
    <script src="{{ url_for('static', filename = 'common/js/libs/jquery-ui.min.js') }}"></script>
    <script src="{{ url_for('static', filename = 'common/js/libs/datepicker.js') }}"></script>
    <!-- Popper Sidebar -->
    <script src="{{ url_for('static', filename = 'modules/popper/umd/popper.min.js') }}"></script>

    <!-- Bootstrap JS -->
    <script src="{{ url_for('static', filename = 'common/js/libs/bootstrap.min.js') }}"></script>
    <!-- Fontawesom -->
    <script src="{{ url_for('static', filename = 'common/js/libs/all.min.js') }}"></script>
    <script src="{{ url_for('static', filename = 'common/js/libs/jquery.ui.datepicker-ja.min.js') }}"></script>
    <!-- Custom Common JS -->
    <script src="{{ url_for('static', filename = 'common/js/libs/moment-with-locales.js') }}"></script>
    <script src="{{ url_for('static', filename = 'common/js/libs/loadingoverlay.min.js') }}"></script>

    <script src="{{ url_for('static', filename = 'common/js/libs/lodash.min.js') }}"></script>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script src="{{ url_for('static', filename = 'common/js/libs/gtag.js') }}"></script>

    <script src="{{ url_for('static', filename = 'common/js/libs/clipboard.min.js') }}"></script>

    <!-- To calculate size of object -->
    <script src="{{ url_for('static', filename = 'common/js/config_data_interface.js') }}"></script>

    <!-- Bootstrap table -->
    <link rel="stylesheet" href="{{ url_for('static', filename = 'common/css/bootstrap-table.min.css') }}">
    <script src="{{ url_for('static', filename = 'common/js/libs/bootstrap-table.min.js') }}"></script>
    <script src="{{ url_for('static', filename = 'common/js/libs/bootstrap-table-filter-control.min.js') }}"></script>
    <script src="{{ url_for('static', filename = 'common/js/libs/bootstrap-table-locale-all.min.js') }}"></script>
    <script src="{{ url_for('static', filename = 'common/js/libs/html2canvas.min.js') }}"></script>
    <script src="{{ url_for('static', filename = 'common/js/take_screenshot.js') }}"></script>
    {#    <script src="{{ url_for('static', filename = 'common/js/libs/plotly-latest.min.js') }}"></script>#}
    <script src="{{ url_for('static', filename = 'common/js/libs/plotly.min.js') }}"></script>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename = 'common/css/toastr.css') }}">
    <script type="text/javascript" src="/static/common/js/libs/toastr.min.js"></script>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename = 'common/css/data-finder.css') }}">

    <link rel="stylesheet"
          href="{{ url_for('static', filename = 'modules/js-datatables/lib/jquery.dataTables.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename = 'common/css/user-setting-table.css') }}">
    <script src="{{ url_for('static', filename = 'modules/js-datatables/lib/jquery.dataTables.min.js') }}"></script>
	<script src="{{ url_for('static', filename = 'common/js/libs/dataTables.fixedHeader.min.js') }}"></script>

	<!-- Select 2 -->
	<script src="{{ url_for('static', filename = 'common/js/libs/select2.min.js') }}"></script>

    <script src="{{ url_for('static', filename = 'common/js/terms_of_use.js') }}"></script>
    <script src="{{ url_for('static', filename = 'common/js/base.js') }}"></script>
    <script src="{{ url_for('static', filename = 'common/js/utils.js') }}"></script>
    <script src="{{ url_for('static', filename = 'common/js/summary_table.js') }}"></script>
    <script src="{{ url_for('static', filename = 'common/js/auto-update-common.js') }}"></script>
    <script src="{{ url_for('static', filename = 'common/js/data-finder.js') }}"></script>
    <script src="{{ url_for('static', filename = 'common/js/components.js') }}"></script>
    <script src="{{ url_for('static', filename = 'common/js/data_point_info_table.js') }}"></script>
    <script src="{{ url_for('static', filename = 'common/js/save_load_user_input.js') }}"></script>
    <script src="{{ url_for('static', filename = 'common/js/validation.js') }}"></script>
    <script src="{{ url_for('static', filename = 'common/js/clipboard_utils.js') }}"></script>
    <script src="{{ url_for('static', filename = 'common/js/libs/dragndrop.js') }}"></script>
    <script src="{{ url_for('static', filename = 'common/js/libs/d3-format.js') }}"></script>
    <script src="{{ url_for('static', filename = 'common/js/dn-custom-select.js') }}"></script>

    <!-- Shepherd: Tour -->
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename = 'common/css/shepherd.css') }}">
    <script src="{{ url_for('static', filename = 'common/js/libs/popper.min.js') }}"></script>
    <script src="{{ url_for('static', filename = 'common/js/libs/shepherd.min.js') }}"></script>
    <script src="{{ url_for('static', filename='common/js/ap_tour.js') }}"></script>

	<script>
		window.dataLayer = window.dataLayer || [];

		function gtag() {
            dataLayer.push(arguments);
        }

        gtag('js', new Date());

        gtag('config', 'UA-156244372-2', {
            'link_attribution': {
                'cookie_name': '_gaela',
                'cookie_expires': 60,
                'levels': 4,
            },
            'linker': {
                'accept_incoming': true,
                'domains': ['127.0.0.1', 'localhost:6868', '192.168.1.69:6868'],
            },
        });

        gtag('config', 'G-9DJ9TV72B5', {
            'link_attribution': {
                'cookie_name': '_gaela',
                'cookie_expires': 60,
                'levels': 4,
            },
            'linker': {
                'accept_incoming': true,
                'domains': ['127.0.0.1', 'localhost:6868', '192.168.1.69:6868'],
            },
        });

        //Dictionaryを生成する。
        let objTitle = {
            '/ap/stp': {
                'title': 'StP',
                'icon': 'StP.ico',
            },
            '/ap/rlp': {
                'title': 'RLP',
                'icon': 'RLP.ico',
            },
            '/ap/fpp': {
                'title': 'FPP',
                'icon': 'FPP.ico',
            },
            '/ap/scp': {
                'title': 'ScP',
                'icon': 'ScP.ico',
            },
            '/ap/msp': {
                'title': 'MSP',
                'icon': 'MSP.ico',
            },
            '/ap/chm': {
                'title': 'CHM',
                'icon': 'CHM.ico',
            },
            '/ap/analyze/anomaly_detection/pca': {
                'title': 'PCA',
                'icon': 'PCA.ico',
            },
            '/ap/table_viewer': {
                'title': 'TView',
                'icon': 'TView.ico',
            },
            '/ap/config/filter_visualization': {
                'title': 'Filter',
                'icon': 'Filter.ico',
            },
            '/ap/config/filter': {
                'title': 'Filter',
                'icon': 'Filter.ico',
            },
            '/ap/config/master': {
                'title': 'Master',
                'icon': 'Master.ico',
            },
            '/ap/config/job': {
                'title': 'Job',
                'icon': 'Job.ico',
            },
            '/ap/about': {
                'title': 'About',
                'icon': 'favicon.ico',
            },
            '/ap/config': {
                'title': 'Config',
                'icon': 'Config.ico',
            },
            '/ap/cog': {
                'title': 'COG',
                'icon': 'COG.ico',
            },
            '/ap/skd': {
                'title': 'SkD',
                'icon': 'SkD.ico',
            },
            '/ap/pcp': {
                'title': 'PCP',
                'icon': 'PCP.ico',
            },
			'/ap/plot_view': {
                'title': 'Plotview',
                'icon': 'favicon.ico',
            },
        };

        //現在Urlを取得する。
        const currentUrl = $(location)
            .attr('pathname');

        //現在UrlとDictionaryを比較して、一致すれば、Dictionaryの設定データを取得する。
        const getSetting = objTitle[currentUrl];
        if (getSetting) {
            $('title')
                .html(getSetting.title);
            $('link[rel*=\'icon\']')
                .prop('href', '/static/common/icons/' + getSetting.icon + '');
        }

    </script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-9DJ9TV72B5"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-9DJ9TV72B5');

      const user_group = docCookies.getItem('user_group');
      const app_source = docCookies.getItem('app_location');
      let app_version = docCookies.getItem('app_version');
      app_version = app_version.split('.').slice(0,-1).join('.');

      gtag('event', 'Version', {
          dn_app_version: app_version
      });

      gtag('event', 'Source', {
          dn_app_source: app_source
      });

      gtag('event', 'Group', {
          dn_app_group: user_group
      });
    </script>

    {% block asset %}
    {% endblock %}
</head>

<body style="overflow-x: hidden">
<div class="wrapper">
    {% include 'i18n.html' %}
    {% include 'sidebar.html' %}
    {% block body %}
        <div id="content">
            <header class="main-header navbar-expand-lg navbar-dark bg-primary graph-navi graph-navi-top-down">
                {% include 'header.html' %}
            </header>
            {% include 'messages.html' %}
            <div class="row" id="mainContent">
                <div class="col-lg-12">
                    {% block header %}{% endblock %}
                    {% block midbody %}
                    {% endblock %}
                </div>
                <div class="col-lg-3 rounded">
                </div>
            </div>
            {% include 'graph_nav.html' %}

            <div id="screenshot" style="display: none;"></div>
            {% include 'modal.html' %}

            {% include 'footer.html' %}
        </div>
    {% endblock %}
	<script type="text/javascript">
		// hide setting page
		const hideSettingPage = docCookies.getItem('hide_setting_page');
        const useDefaultLogLevel = docCookies.getItem('log_level');
		if (hideSettingPage === 'True') {
			$('#settingPageMenu')
				.css('display', 'none');
		}
        $('header.main-header').removeClass('green-header');
        if (useDefaultLogLevel === 'False') {
            $('header.main-header').addClass('green-header');
        }

		// app version
		const version = docCookies.getItem('app_version');
		$('#appVersion')
			.text(version);

		// app Location
		const appLocation = docCookies.getItem('app_location');
		if (appLocation) {
			$('#appLocation').text(appLocation);
		}

		// collapse sidebar when loading page
		sidebarCollapse();
	</script>
	<div class="cross v left">
		<div class="cross h left"></div>
	</div>
	<div class="cross v right">
		<div class="cross h right"></div>
	</div>

</body>
{% block js %}
{% endblock %}
</html>
